<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Appointment App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

  <header class="app-header">
    <div class="logo">Rathnapura General Hospital</div>
    <div class="menu" id="menuBtn">â˜°</div>
  </header>

  <nav class="mobile-menu" id="mobileMenu">
  <ul>
    <li><a href="{{ url_for('home') }}">Home</a></li>
    
    {% if session.get('role') == 'patient' %}
      <li><a href="{{ url_for('my_appointments') }}">My Appointments</a></li>
      <li><a href="{{ url_for('logout') }}">Logout ({{ session['username'] }})</a></li>
    {% elif session.get('role') == 'admin' %}
      <li><a href="{{ url_for('admin_dashboard') }}">Admin Dashboard</a></li>
      <li><a href="{{ url_for('logout') }}">Logout Admin</a></li>
    {% elif session.get('role') == 'doctor' %}
      <li><a href="{{ url_for('doctor_schedule') }}">My Schedule</a></li>
      <li><a href="{{ url_for('logout') }}">Logout Dr. {{ session['username'] }}</a></li>
    {% else %}
      <li><a href="{{ url_for('login') }}">Login / Register</a></li>
    {% endif %}
  </ul>
</nav>

  <div id="overlay" class="overlay"></div>

  <section class="hero">
    <img src="{{ url_for('static', filename='assets/coverphoto.jpg') }}" alt="Hospital">
    <h1>Book Your Appointment Online</h1>
    <p>Skip the queues and manage your appointments easily from your phone.</p>
    <button id="bookNowBtn" class="btn">Book Appointment</button>
  </section>

  <section class="quick-actions">
  <div class="action-card" id="bookAppointment">
    ğŸ“…<span>Book Appointment</span>
  </div>

  <div class="action-card" id="myAppointments" 
       data-url="{{ url_for('my_appointments') }}" 
       onclick="window.location.href=this.getAttribute('data-url')">
    ğŸ“<span>My Appointments</span>
  </div>

  <div class="action-card" id="searchDoctor" 
       data-url="{{ url_for('view_doctors') }}" 
       onclick="window.location.href=this.getAttribute('data-url')">
    ğŸ”<span>View Doctor</span>
  </div>    
</section>


  <section class="notices">
    <h2>Notices</h2>
      <div class="notice-card">ğŸ©º New cardiologist, Dr. Sanjeewa Kumara, has joined our hospital.</div>
      <div class="notice-card">ğŸ¥ Free diabetes screening camp on 12th February. Register early!</div>
      <div class="notice-card">ğŸ‘¶ Pediatric vaccination drive continues this month. Schedule your childâ€™s appointment.</div>
      <div class="notice-card">ğŸ§  Neurology awareness seminar on 15th February. Open to all patients.</div>
      <div class="notice-card">ğŸ’Š New pharmacy hours: 8 AM to 6 PM daily.</div>
      <div class="notice-card">ğŸ’‰ COVID-19 & Flu vaccines available. Book your slot online now!</div>
  </section>

  <footer>
    &copy; 2026 Rathnapura General Hospital, Sri Lanka
    <p>0452 222 261</p>
  </footer>

  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Book Appointment</h2>
      <form id="appointmentForm">
        <label>Patient Name</label>
        <input type="text" name="name" value="{{ session['username'] }}" readonly>

        <label>Department / Doctor</label>
        <select name="department" required>
            <option value="">-- Select Department --</option>
            {% for dept in departments %}
              <option value="{{ dept['id'] }}">{{ dept['name'] }}</option>
            {% endfor %}
        </select>

        <label>Date</label>
        <input type="date" name="date" id="appointmentDate" required>

        <label>Time</label>
        <input type="time" name="time" required>

        <button type="submit">Confirm</button>
      </form>
    </div>
  </div>

  <div id="confirmationCard" class="confirmation-card" style="display:none;"></div>

  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script>
    // Simple script to prevent picking past dates
    const dateInput = document.getElementById('appointmentDate');
    if(dateInput) {
        dateInput.min = new Date().toISOString().split("T")[0];
    }
  </script>
</body>
</html>